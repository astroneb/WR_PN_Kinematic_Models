<!DOCTYPE html>
<!--
HTML and Javascript codes developed by Ashkbiz Danehkar 
using the X3DOM framework and runtime for 3D graphics on the Web, 
University of Michigan, 2021
https://danehkar.github.io/
This interface uses the X3DOM framework:
"X3DOM: a DOM-based HTML5/X3D integration model" Behr, J., Eschler, P., Jung, Y.,  Zollner, M., 
in Proc. the 14th Inter. Conf. on 3D Web Technology, 127â€“135 (2009), doi:10.1145/1559764.1559784
-->
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Interactive 3D Figure of Morpho-kinematic Mesh Models</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <!--<script type='text/javascript' src='https://www.x3dom.org/x3dom/release/x3dom.js'></script>
    <link rel='stylesheet' type='text/css' href='https://www.x3dom.org/x3dom/release/x3dom.css'/>-->
    <script type='text/javascript' src='x3dom.js'></script>
    <link rel='stylesheet' type='text/css' href='x3dom.css'/>
    <script type="text/javascript" src="x3dom-include.js"></script>
</head>
<body>

<h1>Morpho-kinematic properties of Wolf-Rayet planetary nebulae</h1>

<h2>Supplementary Material</h2>

<p>
<b>Figure 5.</b> The interactive figure of the morpho-kinematic mesh models (14 models in the X3D file format) of the PNe M 3-30, Hb 4, IC 1297, Th 2-A, Pe 1-1, M 1-32, M 3-15, M 1-25, Hen 2-142, K 2-16, MGC 6578, M 2-42, NGC 6567 and NGC 6629 in the X3DOM framework.
</p>

<table>
  <tr>
    <th width="20"></th>
    <th height="100%"></th>
  </tr>
  <tr>
   <td style="width: 20; vertical-align:top">
   </td>
   <td style="text-align: center; vertical-align: middle;">
   <center>
   <span id="value_pn_name" style="font-weight:bold;color:black"></span>
   </center>
   </td>
</tr>
  <tr>
    <td style="width: 20; vertical-align:top">
    <input type="button" value="M 3-30" onclick="load_x3d_file('m3-30.x3d','M 3-30','017.9-04.8',-45.0,25.0);" style="width: 90px;"><br/>
    <input type="button" value="Hb 4" onclick="load_x3d_file('hb4.x3d','Hb 4','003.1+02.9',25.0,-40.0);" style="width: 90px;"><br/>
    <input type="button" value="IC 1297" onclick="load_x3d_file('ic1297.x3d','IC 1297','358.3-21.6',30.0,-145.0);" style="width: 90px;"><br/>
    <input type="button" value="Th 2-A" onclick="load_x3d_file('th2-a.x3d','Th 2-A','306.4-00.6',-45.0,-10.0);" style="width: 90px;"><br/>
    <input type="button" value="Pe 1-1" onclick="load_x3d_file('pe1-1.x3d','Pe 1-1','285.4+01.5',-75.0,75.0);" style="width: 90px;"><br/>
    <input type="button" value="M 1-32" onclick="load_x3d_file('m1-32.x3d','M 1-32','011.9+04.2',-40.0,4.0);" style="width: 90px;"><br/>
    <input type="button" value="M 3-15" onclick="load_x3d_file('m3-15.x3d','M 3-15','006.8+04.1',130.0,4.0);" style="width: 90px;"><br/>
    <input type="button" value="M 1-25" onclick="load_x3d_file('m1-25.x3d','M 1-25','004.9+04.9',30.0,65.0);" style="width: 90px;"><br/>
    <input type="button" value="Hen 2-142" onclick="load_x3d_file('hen2-142.x3d','Hen 2-142','327.1-02.2',-45.0,-80.0);" style="width: 90px;"><br/>
    <input type="button" value="K 2-16" onclick="load_x3d_file('k2-16.x3d','K 2-16','352.9+11.4',110.0,-30.0);" style="width: 90px;"><br/>
    <input type="button" value="MGC 6578" onclick="load_x3d_file('ngc6578.x3d','MGC 6578','010.8-01.8',-48.0,-45.0);" style="width: 90px;"><br/>
    <input type="button" value="M 2-42" onclick="load_x3d_file('m2-42.x3d','M 2-42','008.2-04.8',50.0,-82.0);" style="width: 90px;"><br/>
    <input type="button" value="MGC 6567" onclick="load_x3d_file('ngc6567.x3d','MGC 6567','011.7-00.6',-40.0,46.0);" style="width: 90px;"><br/>
    <input type="button" value="NGC 6629" onclick="load_x3d_file('ngc6629.x3d','NGC 6629','009.4-05.0',-40.0,60.0);" style="width: 90px;"><br/>
   </td>
  <td style="text-align: center; vertical-align: middle;">
<x3d id='x3d' width="600px" height="600px">
    <scene id='scene' DEF='scene'>
     <viewpoint id='viewpoint' fieldOfView='0.785398'></viewpoint>
<!--         <OrthoViewpoint id="orthoviewpoint" fieldOfView="-1 -1 1 1" viewAll='true'></OrthoViewpoint> -->
     <Transform id='transz' rotation = '0 0 1 0'>
     <!-- 90 deg rotation around the y-axis (up/down) -->
      <Transform id='transy' rotation = '0 1 0 1.5708'>
       <!-- -90 deg rotation around the x-axis -->
       <Transform id='transx' rotation = '1 0 0 -1.5708'>
           <Inline id='inline' url="m3-30.x3d" nameSpaceName="MAIN" mapDEFToID="true"></Inline>
       </Transform>
      </Transform>
    </Transform>
    </scene>
</x3d>
</td>
</tr>
  <tr>
  <td style="width: 20; vertical-align:top">
  </td>
  <td style="text-align: center; vertical-align: middle;">
    <input type="button" value="Top View" onclick="transfer_top();" style="width: 80px;">
    <input type="button" value="Front View" onclick="transfer_front();" style="width: 80px;">
    <input type="button" value="Best View" onclick="transfer_pa_inc(pos_ang,inc_ang);" style="width: 80px;">
    <input type="button" value="Zoom +" onclick="zoom(-0.05);" style="width: 80px;">
    <input type="button" value="Zoom -" onclick="zoom(0.05);" style="width: 80px;">
    <input type="button" value="Reset" onclick="reset_view();" style="width: 80px;">
  </td>
</tr>
</table>
<script>
var pos_ang = -45.0;
var inc_ang = 25.0;

function fitAll(){
    document.getElementById('x3d').runtime.fitAll();
}

function change_viewpoint(typename, id)
{
/* ====================================================
Change viewpoint of X3DOM.
typename: string -
walk:        Switches to walk mode.
examine:     Switches to examine mode.
lookAround:  Switches to lookAround mode.
lookAt:      Switches to lookAt mode.
resetView:   Navigates to the initial viewpoint.
uprightView: Navigates to upright view.
showAll:     Zooms so that all objects are visible.
nextView:    Navigates to the next viewpoint.
prevView:    Navigates to the previous viewpoint.
Returns:     The current viewpoint.
==================================================== */
    var x3d_element = document.getElementById(id);
    switch (typename)
    {
        case "walk": x3d_element.runtime.walk(); break;
        case "fly": x3d_element.runtime.fly(); break;
        case "examine": x3d_element.runtime.examine(); break;
        case "lookAround": x3d_element.runtime.lookAround(); break;
        case "lookAt": x3d_element.runtime.lookAt(); break;
        case "game": x3d_element.runtime.game(); break;
        case "resetView": x3d_element.runtime.resetView(); break;
        case "uprightView": x3d_element.runtime.uprightView(); break;
        case "showAll": x3d_element.runtime.showAll(); break;
        case "fitAll": x3d_element.runtime.fitAll(); break;
        case "nextView": x3d_element.runtime.nextView(); break;
        case "prevView": x3d_element.runtime.prevView(); break;
        default: x3d_element.runtime.examine();
    }
}

function remove_all_child_nodes(parent) {
    for (var i = 0; i < parent.childNodes.length; i++) {
        if (parent.childNodes[i].nodeType === Node.ELEMENT_NODE) {
            parent.removeChild(ot.childNodes[i]);
  	    break;
  	}
   }
}

function change_perpective(){
    document.getElementById('x3d').runtime.nextView();
    return false;
}
 
function load_x3d_file(filename,pn_name,png_name,pa_deg,i_deg) {
    pos_ang = pa_deg;
    inc_ang = i_deg;
    //value_pn_name.innerHTML=pn_name+ ' (PNG'+png_name+')';
    value_pn_name.innerHTML=pn_name;
    x3dom.reload();
    var inline = document.getElementById("inline");
    inline.setAttribute("url", filename);
    var x3d_element = document.getElementById('x3d');
//    x3d_element.runtime.fitAll();
//    x3d_element.addEventListener("downloadsfinished",
//          function()
//          {
//              x3d_element.runtime.fitAll();
//          }
//      );
    transfer_pa_inc(pos_ang,inc_ang);
//    change_viewpoint('showAll','x3d');
    x3d_element.addEventListener("downloadsfinished",
        function()
        {
             x3d_element.runtime.fitAll();
        }
    );
    //x3d_element.runtime.fitAll();
    x3d_element.runtime.showAll();
    x3d_element.addEventListener("downloadsfinished",
        function()
        {
             x3d_element.runtime.fitAll();
        }
    );
}
        
function transfer_pa_inc(pa_deg,i_deg) {
    x3dom.reload();
    var x3d_element = document.getElementById('x3d');
    //x3d_element.runtime.fitAll();
    x3d_element.runtime.showAll();
    x3d_element.addEventListener("downloadsfinished",
        function()
        {
             x3d_element.runtime.fitAll();
        }
    );
    var transx = document.getElementById("transx");
    var transy = document.getElementById("transy");
    var transz = document.getElementById("transz");
    var pa_rad=3.14*(180+pa_deg+0.0)/180;
    var i_rad=3.14*(i_deg)/180;
    transx.setAttribute("rotation", '1 0 0 '+String(i_rad));
    transy.setAttribute("rotation", '0 1 0 0');
    transz.setAttribute("rotation", '0 0 1 '+String(pa_rad));
    x3d_element.addEventListener("downloadsfinished",
        function()
        {
             x3d_element.runtime.fitAll();
        }
    );
    //x3d_element.runtime.fitAll();
    x3d_element.runtime.showAll();
    x3d_element.addEventListener("downloadsfinished",
        function()
        {
             x3d_element.runtime.fitAll();
        }
    );
}
        
function transfer_front() {
    x3dom.reload();
    var x3d_element = document.getElementById('x3d');
    //x3d_element.runtime.fitAll();
    x3d_element.runtime.showAll();
    x3d_element.addEventListener("downloadsfinished",
        function()
        {
             x3d_element.runtime.fitAll();
        }
    );
    var transx = document.getElementById("transx");
    var transy = document.getElementById("transy");
    var transz = document.getElementById("transz");
    transx.setAttribute("rotation", '1 0 0 1.5708');
    transy.setAttribute("rotation", '0 1 0 1.5708');
    transz.setAttribute("rotation", '0 0 1 0');
    x3d_element.addEventListener("downloadsfinished",
        function()
        {
             x3d_element.runtime.fitAll();
        }
    );
    //x3d_element.runtime.fitAll();
    x3d_element.runtime.showAll();
    x3d_element.addEventListener("downloadsfinished",
        function()
        {
             x3d_element.runtime.fitAll();
        }
    );
}
        
function transfer_top() {
    x3dom.reload();
    var x3d_element = document.getElementById('x3d');
    //x3d_element.runtime.fitAll();
    x3d_element.runtime.showAll();
    x3d_element.addEventListener("downloadsfinished",
        function()
        {
             x3d_element.runtime.fitAll();
        }
    );
    var transx = document.getElementById("transx");
    var transy = document.getElementById("transy");
    var transz = document.getElementById("transz");
    transx.setAttribute("rotation", '1 0 0 0');
    transy.setAttribute("rotation", '0 1 0 0');
    transz.setAttribute("rotation", '0 0 1 3.1416');
    x3d_element.addEventListener("downloadsfinished",
        function()
        {
             x3d_element.runtime.fitAll();
        }
    );
    //x3d_element.runtime.fitAll();
    x3d_element.runtime.showAll();
    x3d_element.addEventListener("downloadsfinished",
        function()
        {
             x3d_element.runtime.fitAll();
        }
    );
}

function reset_view() {
    x3dom.reload();
    var x3d_element = document.getElementById('x3d');
    x3d_element.addEventListener("downloadsfinished",
          function()
          {
              x3d_element.runtime.fitAll();
          }
    );
    //x3d_element.runtime.fitAll();
    x3d_element.runtime.showAll();
    x3d_element.addEventListener("downloadsfinished",
          function()
          {
              x3d_element.runtime.fitAll();
          }
    );
}
    
function zoom(scalezoom) {
    var vpt = document.getElementById("viewpoint");
    vpt.fieldOfView = parseFloat(vpt.fieldOfView) + scalezoom;
    x3dom.reload();
}

var value_pn_name=document.getElementById("value_pn_name");
value_pn_name.innerHTML ='M 3-30';
x3dom.reload();
load_x3d_file('m3-30.x3d','M 3-30','017.9-04.8',-45.0,25.0);
//change_viewpoint('showAll','x3d');
</script>
    
</body>
</html> 
